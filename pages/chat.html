<html>
  <head>
    <title>ChatGPT Data Export</title>
    <style>
      body {
        margin: 20px;
      }
      h4 {
        font-family: sans-serif;
        margin: 0;
      }
      #root {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      .conversation {
        border: 1px solid black;
        padding: 20px;
        background-color: #f3f3f3;
      }
      .message {
        white-space: pre-wrap;
        margin: 20px 0;
      }
      .author {
        font-weight: bold;
        margin-bottom: 4px;
      }
      .author::first-letter {
        text-transform: uppercase;
      }
    </style>
    <script>
      var jsonData = [{"title": "Normal Distribution Formula", "create_time": 1706226285.200955, "update_time": 1706226288.43074, "mapping": {"fcd74ebc-8071-4bcd-ad4a-cb002202d5a9": {"id": "fcd74ebc-8071-4bcd-ad4a-cb002202d5a9", "message": {"id": "fcd74ebc-8071-4bcd-ad4a-cb002202d5a9", "author": {"role": "system", "name": null, "metadata": {}}, "create_time": null, "update_time": null, "content": {"content_type": "text", "parts": [""]}, "status": "finished_successfully", "end_turn": true, "weight": 0.0, "metadata": {"is_visually_hidden": true}, "recipient": "all"}, "parent": "aaa12510-8ac3-40c6-b16a-46d089b00c5e", "children": ["f17bf2e0-bec0-47a6-ad4b-5e44f51cc2ea"]}, "aaa12510-8ac3-40c6-b16a-46d089b00c5e": {"id": "aaa12510-8ac3-40c6-b16a-46d089b00c5e", "message": null, "parent": null, "children": ["fcd74ebc-8071-4bcd-ad4a-cb002202d5a9"]}, "f17bf2e0-bec0-47a6-ad4b-5e44f51cc2ea": {"id": "f17bf2e0-bec0-47a6-ad4b-5e44f51cc2ea", "message": {"id": "f17bf2e0-bec0-47a6-ad4b-5e44f51cc2ea", "author": {"role": "system", "name": null, "metadata": {}}, "create_time": null, "update_time": null, "content": {"content_type": "text", "parts": [""]}, "status": "finished_successfully", "end_turn": null, "weight": 1.0, "metadata": {"is_user_system_message": true, "user_context_message_data": {"about_user_message": "My name is Alex. \nI am a data scientist. \nI am working on computational philosophy, in particular on: epistemology, game theory. Right now I am researching meta-induction and game-theoretic solutions of the problems related to it.", "about_model_message": "While answering my questions format all formulas in MathJax."}, "is_visually_hidden": true}, "recipient": "all"}, "parent": "fcd74ebc-8071-4bcd-ad4a-cb002202d5a9", "children": ["aaa24470-199b-482c-87af-65053a469aa8"]}, "aaa24470-199b-482c-87af-65053a469aa8": {"id": "aaa24470-199b-482c-87af-65053a469aa8", "message": {"id": "aaa24470-199b-482c-87af-65053a469aa8", "author": {"role": "user", "name": null, "metadata": {}}, "create_time": 1706226285.201703, "update_time": null, "content": {"content_type": "text", "parts": ["What is the formula for a Normal distribution?"]}, "status": "finished_successfully", "end_turn": null, "weight": 1.0, "metadata": {"timestamp_": "absolute", "message_type": null}, "recipient": "all"}, "parent": "f17bf2e0-bec0-47a6-ad4b-5e44f51cc2ea", "children": ["6520e2be-31d9-47e6-9b72-291c211d21ad"]}, "6520e2be-31d9-47e6-9b72-291c211d21ad": {"id": "6520e2be-31d9-47e6-9b72-291c211d21ad", "message": {"id": "6520e2be-31d9-47e6-9b72-291c211d21ad", "author": {"role": "assistant", "name": null, "metadata": {}}, "create_time": 1706226287.826023, "update_time": null, "content": {"content_type": "text", "parts": ["The probability density function (PDF) of a normal distribution, also known as a Gaussian distribution, is given by the following formula:\n\n\\[ f(x | \\mu, \\sigma^2) = \\frac{1}{\\sigma \\sqrt{2\\pi}} e^{-\\frac{(x - \\mu)^2}{2\\sigma^2}} \\]\n\nHere,\n- \\( x \\) is the variable.\n- \\( \\mu \\) is the mean of the distribution.\n- \\( \\sigma^2 \\) is the variance of the distribution.\n\nIf you have any specific questions or if you need further clarification, feel free to ask!"]}, "status": "finished_successfully", "end_turn": true, "weight": 1.0, "metadata": {"finish_details": {"type": "stop", "stop_tokens": [100260]}, "gizmo_id": null, "is_complete": true, "message_type": null, "model_slug": "text-davinci-002-render-sha", "parent_id": "aaa24470-199b-482c-87af-65053a469aa8", "timestamp_": "absolute"}, "recipient": "all"}, "parent": "aaa24470-199b-482c-87af-65053a469aa8", "children": []}}, "moderation_results": [], "current_node": "6520e2be-31d9-47e6-9b72-291c211d21ad", "plugin_ids": null, "conversation_id": "283d5a76-c269-4f35-a122-30e1b11bebd7", "conversation_template_id": null, "gizmo_id": null, "is_archived": false, "safe_urls": [], "id": "283d5a76-c269-4f35-a122-30e1b11bebd7"}]

      function getConversationMessages(conversation) {
          var messages = [];
          var currentNode = conversation.current_node;
          while (currentNode != null) {
              var node = conversation.mapping[currentNode];
              if (
                  node.message &&
                  node.message.content &&
                  node.message.content.content_type == "text"
                  && node.message.content.parts.length > 0 &&
                  node.message.content.parts[0].length > 0 &&
                  (node.message.author.role !== "system"  || node.message.metadata.is_user_system_message)
              ) {
                  author = node.message.author.role;
                  if (author === "assistant") {
                      author = "ChatGPT";
                  } else if (author === "system" && node.message.metadata.is_user_system_message) {
                      author = "Custom user info"
                  }
                  messages.push({ author, text: node.message.content.parts[0] });
              }
              currentNode = node.parent;
          }
          return messages.reverse();
      }

      // on load, add messages to the root div
      window.onload = function() {
          var root = document.getElementById("root");
          for (var i = 0; i < jsonData.length; i++) {
              var conversation = jsonData[i];
              var messages = getConversationMessages(conversation);
              var div = document.createElement("div");
              div.className = "conversation";
              div.innerHTML = "<h4>" + conversation.title + "</h4>";
              for (var j = 0; j < messages.length; j++) {
                  var message = document.createElement("pre");
                  message.className = "message";
                  message.innerHTML = `<div class="author">${messages[j].author}</div><div>${messages[j].text}</div>`;
                  div.appendChild(message);
              }
              root.appendChild(div);
          }
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>